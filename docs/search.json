[{"path":"https://psrc.github.io/psrcctpp/articles/psrcctpp_basics.html","id":"why-ctpp-data","dir":"Articles","previous_headings":"","what":"Why CTPP data?","title":"psrcctpp basics","text":"Although derived American Community Survey (ACS), CTPP includes data items published ACS release, scales substantially smaller ACS Public Use Microdata (PUMS). ACS products, consistent across scales, supports longitudinal analysis, includes margins error. authoritative nationwide, Census Bureau source transportation flow data particular. primary drawback CTPP data approximately 3-year lag develop ; since ’s restricted non-overlapping 5-year spans, may involve remove nearly seven years conclusion first year reported span. Issues transportation impacts accompanying 2020 Covid pandemic long signature data (.e. next data without arrive around 2029).","code":""},{"path":"https://psrc.github.io/psrcctpp/articles/psrcctpp_basics.html","id":"identify-and-retrieve-ctpp-data","dir":"Articles","previous_headings":"","what":"Identify and retrieve CTPP data","title":"psrcctpp basics","text":"order request data, ACS, one must know CTPP table code (variable codes). assist identifying , package search function, ctpp_tblsearch(). two parameters: regular expression argument (“regex”) identifying year survey (.e. last 5-yr span, 2016 2012-16 survey) returns list matching tables. can also help know two basic code patterns: first character table code identifies whether table original (“”, “reported”; confidential data suppressed) perturbed (“B”; noise infusion instead suppression), second indicates either residences (“A1”, “B1”), workplaces (“A2”, “B2”), flow data (“A3”, “B3”). example, ’re looking workplace-geography table showing mode, aka “means transportation” Census parlance. example, first table (A202105) one ’re . Notice, even attribute interest listed secondarily, typically subtotals dimension alone within table. ’ve identified table code, can now use get_psrc_ctpp() function retrieve data. parameters : scale - residence workplace tables, either “county”, “place”, “tract” flow tables, either “county-county”, “place-place”, “place-county”, “county-place”, “tract-tract” “block group” scale available starting 2017-21 survey. table_code - identifier (string) table want (can also request individual variables) dyear - aka data year, last year CTPP span (.e. 2016 2012-16) (optional) list geoids restrict table (optional) network filepath API inoperable (unless ’ve saved set, use term \"default\"; requires PSRC VPN). result standard dataframe. Notice results include res_geoid, res_label work_geoid, work_label fields, work fields blank residential tables residence fields blank workplace tables. Strings default stored characters rather Factor datatype.","code":"shhh <- suppressPackageStartupMessages shhh(library(psrcctpp)) shhh(library(magrittr)) shhh(library(dplyr)) shhh(library(stringr))  ctpp_tblsearch(\"means of transp.\") %>%              # regex is not case-sensitive     filter(grepl(\"^[AB]2\", name))  %>%              # limit to workplace geography     mutate(desc=str_sub(description, 1L, 50L)) %>%  # abbreviate to fit in frame     select(name, desc) %>% head() ##       name                                               desc ## 1: A202105                       Means of transportation (18) ## 2: B202200 Minority Status (3) by Means of Transportation (11 ## 3: B202213   Travel time (12) by Means of transportation (11) ## 4: B202216 Time arriving (17) by Means of transportation (11) ## 5: B203200 Household income in the past 12 months (2016$) (26 ## 6: B203204 Vehicles available (6) by Means of transportation x <- get_psrc_ctpp(\"tract\", \"A202105\", 2016)          # get data  mutate(x, work_label=str_sub(work_label, 7L, 14L),    # abbreviate to fit in frame           cateogry  =str_sub(category, 1L, 15L)) %>%   select(5:8) %>% head() ##    work_label                                    category estimate estimate_moe ## 1:    Tract 1                                     Bicycle       NA           NA ## 2:    Tract 1                          Bus or trolley bus      205           96 ## 3:    Tract 1           Car, truck, or van -- Drove alone      900          244 ## 4:    Tract 1 Car, truck, or van -- In a 2-person carpool       70           54 ## 5:    Tract 1 Car, truck, or van -- In a 3-person carpool       NA           NA ## 6:    Tract 1 Car, truck, or van -- In a 4-person carpool       NA           NA"},{"path":"https://psrc.github.io/psrcctpp/articles/psrcctpp_basics.html","id":"create-custom-variables-and-use-them-to-aggregate-ctpp-data","dir":"Articles","previous_headings":"","what":"Create custom variables and use them to aggregate CTPP data","title":"psrcctpp basics","text":"CTPP data tables include totals well category breakdowns, wish define either custom category custom geography (aggregate smaller geography, e.g. tract block group), can create grouping variable, summarize using variable psrc_ctpp_sum() function, follows. Notice incl_na= option can used limit results without needing filter input data first. can utilize convenience function ctpp_shares() append share share MOE CTPP dataset (long contains category totals, typically true).","code":"shhh(library(stringr)) x %<>% mutate(   custom_geo=case_when(                str_sub(work_geoid,4L,11L) %in% paste0(\"3302380\",3:4)         ~ \"Downtown Bellevue\",                str_sub(work_geoid,4L,11L) %in% paste0(\"61040\",c(4,7:8),\"00\") ~ \"Downtown Everett\",                TRUE                                                          ~ NA_character_),   category=case_when(grepl(\" carpool$\", category)                       ~\"Carpool\",                      grepl(\"Drove alone\", category)                     ~\"Drove Alone\",                      grepl(\"Streetcar|Bus|Subway|Ferry|Rail\", category) ~\"Transit\",                      grepl(\"Bicycle|Walked\", category)                  ~\"Bike/Ped\",                      !is.na(category)                                   ~category)) rs <- psrc_ctpp_sum(x, group_vars=\"custom_geo\", incl_na=FALSE) %>% ctpp_shares() head(rs[,2:7]) ## # A tibble: 6 × 6m ##   custom_geo        category     estimate estimate_moe   share share_moe ##   <chr>             <chr>           <dbl>        <dbl>   <dbl>     <dbl> ## 1 Downtown Bellevue Bike/Ped         2300        451.  0.0643    0.0123  ## 2 Downtown Bellevue Carpool          3960         NA   0.111    NA       ## 3 Downtown Bellevue Drove Alone     23440       1217.  0.655     0.0207  ## 4 Downtown Bellevue Motorcycle        110         61.4 0.00307   0.00171 ## 5 Downtown Bellevue Other method      235         98.8 0.00657   0.00275 ## 6 Downtown Bellevue Taxicab             0         NA   0        NA"},{"path":"https://psrc.github.io/psrcctpp/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Craig Helmann. Author. Suzanne Childress. Maintainer. Christy Lam. Author. Chris Peak. Author. Michael Jensen. Author.","code":""},{"path":"https://psrc.github.io/psrcctpp/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Helmann C, Lam C, Peak C, Jensen M (2022). psrcctpp: Tools utilize Census Transportation Planning Package (CTPP) data via AASHTO API. R package version 0.1.0, https://psrc.github.io/psrcctpp/.","code":"@Manual{,   title = {psrcctpp: Tools to utilize Census Transportation Planning Package (CTPP) data via the AASHTO API},   author = {Craig Helmann and Christy Lam and Chris Peak and Michael Jensen},   year = {2022},   note = {R package version 0.1.0},   url = {https://psrc.github.io/psrcctpp/}, }"},{"path":"https://psrc.github.io/psrcctpp/index.html","id":"psrcctpp","dir":"","previous_headings":"","what":"Tools to utilize Census Transportation Planning Package (CTPP) data via the AASHTO API","title":"Tools to utilize Census Transportation Planning Package (CTPP) data via the AASHTO API","text":"Tools utilize Census Transportation Planning Package (CTPP) data geographies Central Puget Sound Region. Install following command: devtools::install_github(\"psrc/psrcctpp\") problems installing package, make sure latest dependency packages. may prompted install dependency packages ; can install selecting option 1, “Install ”.","code":""},{"path":"https://psrc.github.io/psrcctpp/reference/api_gofer.html","id":null,"dir":"Reference","previous_headings":"","what":"Fetch API results\r\nHelper function sending the API call & parsing its response — api_gofer","title":"Fetch API results\r\nHelper function sending the API call & parsing its response — api_gofer","text":"Fetch API results Helper function sending API call & parsing response","code":""},{"path":"https://psrc.github.io/psrcctpp/reference/api_gofer.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fetch API results\r\nHelper function sending the API call & parsing its response — api_gofer","text":"","code":"api_gofer(url)"},{"path":"https://psrc.github.io/psrcctpp/reference/api_gofer.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Fetch API results\r\nHelper function sending the API call & parsing its response — api_gofer","text":"url api call","code":""},{"path":"https://psrc.github.io/psrcctpp/reference/api_gofer.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Fetch API results\r\nHelper function sending the API call & parsing its response — api_gofer","text":"data table","code":""},{"path":"https://psrc.github.io/psrcctpp/reference/ctpp_shares.html","id":null,"dir":"Reference","previous_headings":"","what":"Add shares to CTPP table — ctpp_shares","title":"Add shares to CTPP table — ctpp_shares","text":"Add shares CTPP table","code":""},{"path":"https://psrc.github.io/psrcctpp/reference/ctpp_shares.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add shares to CTPP table — ctpp_shares","text":"","code":"ctpp_shares(df)"},{"path":"https://psrc.github.io/psrcctpp/reference/ctpp_shares.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add shares to CTPP table — ctpp_shares","text":"df dataframe, either result get_psrc_ctpp psrc_ctpp_stat","code":""},{"path":"https://psrc.github.io/psrcctpp/reference/ctpp_shares.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add shares to CTPP table — ctpp_shares","text":"dataframe share & share_moe","code":""},{"path":"https://psrc.github.io/psrcctpp/reference/ctpp_stat.html","id":null,"dir":"Reference","previous_headings":"","what":"CTPP summary statistics — ctpp_stat","title":"CTPP summary statistics — ctpp_stat","text":"CTPP summary statistics Generate CTPP sums","code":""},{"path":"https://psrc.github.io/psrcctpp/reference/ctpp_stat.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"CTPP summary statistics — ctpp_stat","text":"","code":"psrc_ctpp_sum(df, group_vars = NULL, incl_na = TRUE)"},{"path":"https://psrc.github.io/psrcctpp/reference/ctpp_stat.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"CTPP summary statistics — ctpp_stat","text":"df result get_psrc_ctpp function group_vars grouping variables, original added incl_na whether include NA lines","code":""},{"path":"https://psrc.github.io/psrcctpp/reference/ctpp_stat.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"CTPP summary statistics — ctpp_stat","text":"table variable names labels, summary statistic margin error","code":""},{"path":"https://psrc.github.io/psrcctpp/reference/ctpp_tblsearch.html","id":null,"dir":"Reference","previous_headings":"","what":"Search CTPP table codes — ctpp_tblsearch","title":"Search CTPP table codes — ctpp_tblsearch","text":"Search CTPP table codes","code":""},{"path":"https://psrc.github.io/psrcctpp/reference/ctpp_tblsearch.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Search CTPP table codes — ctpp_tblsearch","text":"","code":"ctpp_tblsearch(regex, year = 2016)"},{"path":"https://psrc.github.io/psrcctpp/reference/ctpp_tblsearch.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Search CTPP table codes — ctpp_tblsearch","text":"regex string pattern match year last 5-year CTPP span, e.g. 2016 ctpp1216 survey","code":""},{"path":"https://psrc.github.io/psrcctpp/reference/ctpp_tblsearch.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Search CTPP table codes — ctpp_tblsearch","text":"data table","code":""},{"path":"https://psrc.github.io/psrcctpp/reference/fetch_ctpp_from_api.html","id":null,"dir":"Reference","previous_headings":"","what":"Fetch CTPP data from AASHTO api\r\nHelper to get_psrc_ctpp — fetch_ctpp_from_api","title":"Fetch CTPP data from AASHTO api\r\nHelper to get_psrc_ctpp — fetch_ctpp_from_api","text":"Fetch CTPP data AASHTO api Helper get_psrc_ctpp","code":""},{"path":"https://psrc.github.io/psrcctpp/reference/fetch_ctpp_from_api.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fetch CTPP data from AASHTO api\r\nHelper to get_psrc_ctpp — fetch_ctpp_from_api","text":"","code":"fetch_ctpp_from_api(scale, table_code, dyear, geoids)"},{"path":"https://psrc.github.io/psrcctpp/reference/fetch_ctpp_from_api.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Fetch CTPP data from AASHTO api\r\nHelper to get_psrc_ctpp — fetch_ctpp_from_api","text":"scale \"county\", \"place\", \"tract\" residence/workplace tables; \"county-county\", \"place-place\", \"place-county\", \"county-place\", \"tract-tract\" O-D tables table_code requested data table string, e.g. \"A302103\" dyear last 5-year CTPP span, e.g. 2016 ctpp1216 survey geoids optional string vector GEOID codes limit table","code":""},{"path":"https://psrc.github.io/psrcctpp/reference/fetch_ctpp_from_api.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Fetch CTPP data from AASHTO api\r\nHelper to get_psrc_ctpp — fetch_ctpp_from_api","text":"data table","code":""},{"path":"https://psrc.github.io/psrcctpp/reference/fetch_ctpp_from_file.html","id":null,"dir":"Reference","previous_headings":"","what":"Fetch ftp-format CTPP data from network location\r\nHelper to get_psrc_ctpp — fetch_ctpp_from_file","title":"Fetch ftp-format CTPP data from network location\r\nHelper to get_psrc_ctpp — fetch_ctpp_from_file","text":"Fetch ftp-format CTPP data network location Helper get_psrc_ctpp","code":""},{"path":"https://psrc.github.io/psrcctpp/reference/fetch_ctpp_from_file.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fetch ftp-format CTPP data from network location\r\nHelper to get_psrc_ctpp — fetch_ctpp_from_file","text":"","code":"fetch_ctpp_from_file(scale, table_code, dyear, filepath = \"default\")"},{"path":"https://psrc.github.io/psrcctpp/reference/fetch_ctpp_from_file.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Fetch ftp-format CTPP data from network location\r\nHelper to get_psrc_ctpp — fetch_ctpp_from_file","text":"scale \"county\", \"place\", \"tract\" residence/workplace tables; \"county-county\", \"place-place\", \"place-county\", \"county-place\", \"tract-tract\" O-D tables table_code requested data table string, e.g. \"A302103\" dyear last 5-year CTPP span, e.g. 2016 ctpp1216 survey filepath optional network location downloaded ftp CTPP files","code":""},{"path":"https://psrc.github.io/psrcctpp/reference/fetch_ctpp_from_file.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Fetch ftp-format CTPP data from network location\r\nHelper to get_psrc_ctpp — fetch_ctpp_from_file","text":"data table","code":""},{"path":"https://psrc.github.io/psrcctpp/reference/get_psrc_ctpp.html","id":null,"dir":"Reference","previous_headings":"","what":"Retrieve CTPP data — get_psrc_ctpp","title":"Retrieve CTPP data — get_psrc_ctpp","text":"Retrieve CTPP data","code":""},{"path":"https://psrc.github.io/psrcctpp/reference/get_psrc_ctpp.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Retrieve CTPP data — get_psrc_ctpp","text":"","code":"get_psrc_ctpp(scale, table_code, dyear = 2016, geoids = NULL, filepath = NULL)"},{"path":"https://psrc.github.io/psrcctpp/reference/get_psrc_ctpp.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Retrieve CTPP data — get_psrc_ctpp","text":"scale \"county\", \"place\", \"tract\" residence/workplace tables; \"county-county\", \"place-place\", \"place-county\", \"county-place\", \"tract-tract\" O-D tables table_code requested data table string, e.g. \"A302103\" dyear last 5-year CTPP span, e.g. 2016 ctpp1216 survey geoids optional string vector GEOID codes limit table filepath optional network location downloaded ftp CTPP files","code":""},{"path":"https://psrc.github.io/psrcctpp/reference/get_psrc_ctpp.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Retrieve CTPP data — get_psrc_ctpp","text":"data table","code":""},{"path":"https://psrc.github.io/psrcctpp/reference/psrc_ctpp_stat.html","id":null,"dir":"Reference","previous_headings":"","what":"Generic call for CTPP summary statistics — psrc_ctpp_stat","title":"Generic call for CTPP summary statistics — psrc_ctpp_stat","text":"Given specific form related ctpp_stat functions.","code":""},{"path":"https://psrc.github.io/psrcctpp/reference/psrc_ctpp_stat.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generic call for CTPP summary statistics — psrc_ctpp_stat","text":"","code":"psrc_ctpp_stat(df, group_vars, stat_type = \"sum\", incl_na = FALSE)"},{"path":"https://psrc.github.io/psrcctpp/reference/psrc_ctpp_stat.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generic call for CTPP summary statistics — psrc_ctpp_stat","text":"df result get_psrc_ctpp function group_vars grouping variables, original added stat_type now, \"sum\" option incl_na whether include NA lines","code":""},{"path":"https://psrc.github.io/psrcctpp/reference/scale_code_lookup.html","id":null,"dir":"Reference","previous_headings":"","what":"Correspondence table for CTPP codes, table type, and scale — scale_code_lookup","title":"Correspondence table for CTPP codes, table type, and scale — scale_code_lookup","text":"Correspondence table CTPP codes, table type, scale","code":""},{"path":"https://psrc.github.io/psrcctpp/reference/scale_code_lookup.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Correspondence table for CTPP codes, table type, and scale — scale_code_lookup","text":"","code":"scale_code_lookup(scale, table_code)"},{"path":"https://psrc.github.io/psrcctpp/reference/scale_code_lookup.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Correspondence table for CTPP codes, table type, and scale — scale_code_lookup","text":"scale \"county\", \"place\", \"tract\" residence/workplace tables; \"county-county\", \"place-place\", \"place-county\", \"county-place\", \"tract-tract\" flow tables table_code requested data table string, e.g. \"A302103\"","code":""},{"path":"https://psrc.github.io/psrcctpp/reference/scale_code_lookup.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Correspondence table for CTPP codes, table type, and scale — scale_code_lookup","text":"correspondence table","code":""}]
